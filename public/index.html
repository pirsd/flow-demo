<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tachyons/4.7.0/tachyons.css">
		<title>Dreamforce 2018 is the best</title>
	</head>
	<body>
		<!--  ----------------------------------------------------------------------  -->
		<!--  NOTE: Please add the following <META> element to your page <HEAD>.      -->
		<!--  If necessary, please modify the charset parameter to specify the        -->
		<!--  character set of your HTML page.                                        -->
		<!--  ----------------------------------------------------------------------  -->

		<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=UTF-8">
		<script src='https://www.google.com/recaptcha/api.js?render=SITE_KEY' async defer></script>
		<script>
		 function timestamp() { var response = document.getElementById("g-recaptcha-response"); if (response == null || response.value.trim() == "") {var elems = JSON.parse(document.getElementsByName("captcha_settings")[0].value);elems["ts"] = JSON.stringify(new Date().getTime());document.getElementsByName("captcha_settings")[0].value = JSON.stringify(elems); } } setInterval(timestamp, 500); 
		</script>
		<script type="text/javascript">
			
			function ValidMail() {
			    var re = /^[\w-\.]+@[\w-]+\.[a-z]{2,4}$/i;
			    var myMail = document.getElementById('email').value;
			    var valid = re.test(myMail);
			    if (valid) output = 'Адрес эл. почты введен правильно!';
			    else output = 'Адрес электронной почты введен неправильно!';
			    document.getElementById('message').innerHTML = output;
			    return valid;
			}

			function ValidPhone() {
			    var re = /^\d[\d\(\)\ -]{4,14}\d$/;
			    var myPhone = document.getElementById('phone').value;
			    var valid = re.test(myPhone);
			    if (valid) output = 'Номер телефона введен правильно!';
			    else output = 'Номер телефона введен неправильно!';
			    document.getElementById('message').innerHTML = document.getElementById('message').innerHTML+'<br />'+output;
			    return valid;
			}  
			
		    var webToLeadFormElement = document.getElementById('web-to-lead-form');
		    var webToLeadFormIsSubmitted = false;

		    webToLeadFormElement.addEventListener('submit', function (event) {
			event.preventDefault();
			if (webToLeadFormIsSubmitted) return;
			webToLeadFormIsSubmitted = true;
			webToLeadFormElement.submit.setAttribute('disabled', 'disabled');

			var payloadData = {
			    company: webToLeadFormElement.company.value,
			    first_name: webToLeadFormElement.first_name.value,
			    last_name: webToLeadFormElement.last_name.value,
			    email: webToLeadFormElement.email.value,
			    phone: webToLeadFormElement.phone.value
				
			};

			// Needed url can be found on Lead Capture detail view.
			var url = 'https://flow-demo-pi-master-yqvngzairh.herokuapp.com/'; 

			var xhr = new XMLHttpRequest();
			xhr.open('POST', url, true);
			xhr.setRequestHeader('Content-Type', 'application/json');
			xhr.setRequestHeader('Accept', 'application/json');
			xhr.onreadystatechange = function() {
			    if (this.readyState == XMLHttpRequest.DONE && this.status == 200) {
				var containerElement = document.getElementById('web-to-lead-form-container');
				containerElement.innerHTML = 'Sent';
			    }
			}
			xhr.onerror = function() {
			    webToLeadFormElement.submit.removeAttribute('disabled');
			    webToLeadFormIsSubmitted = false;
			}
			xhr.send(JSON.stringify(payloadData));
		    });
		</script>

		<!--  ----------------------------------------------------------------------  -->
		<!--  NOTE: Please add the following <FORM> element to your page.             -->
		<!--  ----------------------------------------------------------------------  -->

		<form id="web-to-lead-form" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" method="POST">

		<input type=hidden name='captcha_settings' value='{"keyname":"NewreCaptcha","fallback":"true","orgId":"00D5j000001tjjE","ts":""}'>
		<input type=hidden name="oid" value="00D5j000001tjjE">
		<input type=hidden name="retURL" value="https://flow-demo-pi-master-yqvngzairh.herokuapp.com/">

		<!--  ----------------------------------------------------------------------  -->
		<!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
		<!--  these lines if you wish to test in debug mode.                          -->
		<!--  <input type="hidden" name="debug" value=1>                              -->
		<!--  <input type="hidden" name="debugEmail" value="weqrefa@gmail.com">       -->
		<!--  ----------------------------------------------------------------------  -->

		<label for="company">Company</label>
			<div>
          		 	<input type="text" id="company" maxlength="40" name="company" placeholder="Compani Name" required>
        		</div>
			<br>

		<label for="first_name">First Name</label>
			<div>
			   <input type="text" id="first_name" maxlength="40" name="first_name" placeholder="First Name" required>
			</div>
			<br>

		<label for="last_name">Last Name</label>
			<div>
            			<input type="text" id="last_name" maxlength="80" name="last_name" placeholder="Last Name" required>
        		</div>
			<br>

		<label for="email">Email</label>
			<div>
			  <input type="email" id="email" maxlength="80" name="email" placeholder="Email Address" required>
			</div>
			<br>

		<label for="phone">Phone</label>
			<div>
			  <input type="text" id="phone" maxlength="40" name="phone" placeholder="Phone" required>
			</div>  
			<br>

		Product:<select name="Product__c" title="Product "><option value="Car">Car</option>
		<option value="Part">Part</option>
		<option value="Accessorty">Accessorty</option>
		</select><br>

		<div class="g-recaptcha" data-sitekey="6LfHxCgdAAAAAOJoalpY_2aq-zGOUJDoS-0x_PNO"></div><br>
		<input type="submit" name="submit" onClick="ValidMail(); ValidPhone();">

		</form>

	</body>
</html>
